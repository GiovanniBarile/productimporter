{% extends "@PrestaShop/Admin/layout.html.twig" %}
{% block content %}

	<div class=" d-flex justify-content-around">

		<div class="overflow-auto" style="height:70vh">
			<h1>Remote Categories</h1>

			<div id="remote" class="demo">
				<ul>
					{% for parent in remote_categories %}
						<li data-jstree='{"opened":true}' data-category-id="{{parent.id}}">
							{{ parent.name }}
							{% if parent.x_children|length > 0 %}
								<ul>
									{% for child in parent.x_children %}
										<li data-category-id="{{child.id}}">
											{{ child.name }}
											{% if child.x_children is defined %}
												<ul>
													{% for child2 in child.x_children %}
														<li data-category-id="{{child2.id}}">
															{{ child2.name }}
														</li>
													{% endfor %}
												</ul>
											{% endif %}
										</li>
									{% endfor %}
								</ul>
							{% endif %}
						</li>
					{% endfor %}
				</ul>
			</div>


			{# div with selected category name #}
			<div class="mt-5">
				<p>Selected category:</p>
				<div id="selectedRemoteCategory"></div>
			</div>
		</div>
		<div class="centercol w-10">
			<button id="btn" class="btn btn-primary">Collega</button>
		</div>
		<div>
			<div class="d-flex justify-content-around align-items-center align-content-center">
				<span class="h1 m-0 p-0">Local Categories</span>
				<button type="button" class="btn btn-action btn-sm ml-4" data-toggle="modal" data-target="#addCategoryModal">
					<i class="material-icons">add</i>
				</button>
				<button type="button" disabled class="btn btn-action btn-sm ml-4" id="editCategoryButton" data-toggle="modal" data-target="#editCategoryModal" data-category-id="" data-category-name="">
					<i class="material-icons">edit</i>
				</button>
			</div>
			<div id="local" class="demo">
				<ul>
					{% for parent in categories %}
						<li data-jstree='{"opened":true}' data-category-id="{{ parent.id_category }}">
							{{ parent.name }}

							{% if parent.children|length > 0 %}
								<ul>
									{% for child in parent.children %}
										<li data-category-id="{{ child.id_category }}" data-jstree='{"opened":true}'>
											{{ child.name }}


											{% if child.children is defined %}
												<ul>
													{% for child2 in child.children %}
														<li data-jstree='{"opened":true}' data-category-id="{{ child2.id_category }}">
															{{ child2.name }}
														</li>
													{% endfor %}
												</ul>
											{% endif %}

										</li>
									{% endfor %}
								</ul>
							{% endif %}
						</li>
					{% endfor %}
				</ul>

			</div>
			<div class="mt-5">
				<p>Selected category:
				</p>
				<div id="selectedCategory"></div>
			</div>
		</div>
	</div>

	{# modal for adding new category #}
	{% include '@Modules/productimporter/templates/admin/components/category_crud_modal/add_category_modal.html.twig' %}
	{% include '@Modules/productimporter/templates/admin/components/category_crud_modal/edit_category_modal.html.twig' %}


{% endblock %}

{# load JS #}
{% block javascripts %}
	{{ parent() }}
{% endblock %}

{# load CSS #}
{% block stylesheets %}
	{{ parent() }}
{% endblock %}
